name: SEO & Performance Guard

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  lighthouse:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: [actions/checkout@v4](https://github.com/actions/checkout)

      - name: Use Node.js
        uses: [actions/setup-node@v4](https://github.com/actions/setup-node)
        with:
          node-version: '20'
          cache: 'npm' # Automates maintenance by caching dependencies

      - name: Install & Build
        run: |
          npm install
          # npm run build # Uncomment if you use a build step

      - name: Run Lighthouse Audit
        uses: [treosh/lighthouse-ci-action@v12](https://github.com/treosh/lighthouse-ci-action)
        with:
          # URL is managed in .lighthouserc.json for cleaner logic
          configPath: './lighthouserc.json'
          uploadArtifacts: true
          temporaryPublicStorage: true # Provides a link to the report without manual hosting
          
